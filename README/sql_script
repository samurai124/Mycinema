DROP DATABASE IF EXISTS sg_cinema;
CREATE DATABASE sg_cinema;
USE sg_cinema;

CREATE TABLE films (
    filmId INT PRIMARY KEY ,
    titre VARCHAR(255) NOT NULL,
    duree VARCHAR(50),
    categorie VARCHAR(100)
);

CREATE TABLE seances (
    seanceId INT PRIMARY KEY,
    dateSeance VARCHAR(100) NOT NULL,
    horaire VARCHAR(100) NOT NULL,
    prix FLOAT,
    capaciteMaximale INT,
    salle VARCHAR(50),
    filmId INT,
    FOREIGN KEY (filmId) REFERENCES films(filmId)
);

CREATE TABLE spectateurs (
    spectateurId INT PRIMARY KEY AUTO_INCREMENT,
    nom VARCHAR(250) NOT NULL,
    email VARCHAR(250) unique NOT NULL
);

CREATE TABLE ticket(
    ticketId INT PRIMARY KEY AUTO_INCREMENT,
    prix FLOAT NOT NULL,
    seanceId INT NOT NULL,
    spectateurId INT NOT NULL,
    FOREIGN KEY (seanceId)REFERENCES seances(seanceId),
    FOREIGN KEY (spectateurId)REFERENCES spectateurs(spectateurId)
);